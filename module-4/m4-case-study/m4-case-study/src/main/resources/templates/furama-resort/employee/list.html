<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{/template/inital::heading('Employee')}"></head>
<body>
<header th:replace="~{/template/layout::header('admin')}"></header>
<aside th:replace="~{/furama-resort/employee/layout::sidebar}"></aside>

<section class="position-relative content rounded-top bg-body-tertiary float-end clearfix overflow-y-scroll">
    <h3 class="text-center text-capitalize">Danh sách nhân viên</h3>
    <table class="table table-hover table-bordered">
        <thead>
        <tr class="text-center">
            <th scope="col"><input onclick="checkAllRow()" type="checkbox" name="delete-all-ids" id="delete-all-ids"></th>
            <th scope="col">#</th>
            <th scope="col">Tên NV</th>
            <th scope="col">Ngày sinh</th>
            <th scope="col">Số CMND</th>
            <th scope="col">Lương</th>
            <th scope="col">Điện thoại</th>
            <th scope="col">Email</th>
            <th scope="col">Địa chỉ</th>
            <th scope="col">Bộ phận</th>
            <th scope="col">Vị trí</th>
            <th scope="col">Bằng cấp</th>
<!--            <th scope="col">Tài khoản</th>-->
            <th scope="col">Chỉnh sửa</th>
        </tr>
        </thead>
        <tbody class="list-table-body">
        <th:block th:each="e : ${employees}" th:object="${e}">
            <tr>
                <td><input type="checkbox" name="delete-ids" class="delete-ids" th:attr="data-name=*{name}"
                           th:value="*{id}"></td>
                <th scope="row" th:text="${eStat.count + employees.number*employees.size}"></th>
                <td th:text="*{name}"></td>
                <td th:text="${#temporals.format(e.dateOfBirth, 'dd/MM/yyyy')}"></td>
                <td th:text="*{idCard}"></td>
                <td th:text="*{salary}"></td>
                <td th:text="*{phoneNumber}"></td>
                <td th:text="*{email}"></td>
                <td th:text="*{address}"></td>
                <td th:text="*{division.name}"></td>
                <td th:text="*{position.name}"></td>
                <td th:text="*{educationDegree.name}"></td>
<!--                <td th:text="*{user.username}"></td>-->
                <td>
                    <button th:onclick="showUpdateEmployeeModal([[${e.id}]])" type="button" class="btn btn-outline-info btn-update-employee" data-bs-toggle="modal"
                            data-bs-target="#modal-create-update-employee">
                        Chỉnh sửa
                    </button>
                </td>
            </tr>
        </th:block>
        </tbody>
    </table>
    <button id="btn-create-employee" onclick="showCreateEmployeeModal()" type="button" class="btn btn-outline-primary float-start" data-bs-toggle="modal"
            data-bs-target="#modal-create-update-employee">
        Thêm mới
    </button>
    <button th:unless="${employees.totalPages == 0}" id="btn-delete-confirm" type="button" class="btn btn-outline-danger float-end" data-bs-toggle="modal"
            data-bs-target="#modal-delete" onclick="showDeleteConfirmModal()">
        Xóa
    </button>
    <nav th:replace="~{/furama-resort/employee/layout::paginationNav}"></nav>
</section>

<footer th:replace="~{/template/layout::footer}"></footer>

<section th:replace="~{/furama-resort/employee/layout::createAndUpdate}"></section>
<section th:replace="~{/template/layout::modalDelete}"></section>
<section th:replace="~{/template/layout::toastMessage}"></section>

<script th:inline="javascript">
    $(document).ready(function () {
        let currentPage = [[${employees.number}]]
        let totalPages = [[${employees.totalPages}]]
        let message = [[${message}]]
        showToast(message != null, message);
        setUpDivision();
        setUpPosition();
        setUpEducationDegree();
        activeNavItem("employee");
        activePage(currentPage, totalPages);
        search("employee");
        deleteSubmit("employees");
    })
</script>
</body>
</html>