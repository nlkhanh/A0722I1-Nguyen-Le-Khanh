<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{/template/inital::heading('Contract')}"></head>
<body>
<header th:replace="~{/template/layout::header('admin')}"></header>
<aside th:replace="~{/furama-resort/contract/layout::sidebar}"></aside>

<section class="position-relative content rounded-top bg-body-tertiary float-end clearfix overflow-y-scroll">
    <h3 class="text-center text-capitalize">Danh sách hợp đồng</h3>
    <table class="table table-hover table-bordered">
        <thead>
        <tr class="text-center">
            <th scope="col">#</th>
            <th scope="col">Dịch vụ</th>
            <th scope="col">Khách hàng</th>
            <th scope="col">Ngày bắt đầu</th>
            <th scope="col">Ngày kết thúc</th>
            <th scope="col">Tiền đặt cọc</th>
            <th scope="col">Tổng tiền</th>
            <th scope="col">Các dịch vụ đi kèm</th>
        </tr>
        </thead>
        <tbody class="list-table-body">
        <th:block th:each="c : ${contractDtos}" th:object="${c}">
            <tr>
                <th scope="row" th:text="${cStat.count + contractDtos.number*contractDtos.size}"></th>
                <td th:text="*{facility.name}"></td>
                <td th:text="*{customer.name}"></td>
                <td th:text="${#temporals.format(c.startDate, 'dd/MM/yyyy')}"></td>
                <td th:text="${#temporals.format(c.endDate, 'dd/MM/yyyy')}"></td>
                <td th:text="*{deposit}"></td>
                <td id="totalMoney" th:text="*{totalMoney}"></td>
                <td>
                    <button th:onclick="showCreateContractDetailModal([[${c.id}]])" type="button" class="btn-create-contract-detail btn btn-primary me-2" data-bs-toggle="modal"
                            data-bs-target="#modal-create-contract-detail">
                        +
                    </button>
                    <button th:onclick="showContractDetailModal([[${c.id}]])" type="button" class="btn-show-contract-detail btn btn-primary" data-bs-toggle="modal"
                            data-bs-target="#modal-show-contract-detail">
                        Danh sách các Dịch vụ đi kèm
                    </button>
                </td>
            </tr>
        </th:block>
        </tbody>
    </table>
    <button id="btn-create-contract" onclick="showCreateContractModal()" type="button" class="btn btn-outline-primary float-start" data-bs-toggle="modal"
            data-bs-target="#modal-create-update-contract">
        Thêm mới
    </button>
    <nav th:replace="~{/furama-resort/contract/layout::paginationNav}"></nav>
</section>

<footer th:replace="~{/template/layout::footer}"></footer>

<section th:replace="~{/furama-resort/contract/layout::createAndUpdate}"></section>
<section th:replace="~{/furama-resort/contract/layout::createContractDetail}"></section>
<section th:replace="~{/furama-resort/contract/layout::showContactDetail}"></section>
<section th:replace="~{/template/layout::toastMessage}"></section>

<script th:inline="javascript">
    $(document).ready(function () {
        activeNavItem("contract");
        let currentPage = [[${contractDtos.number}]]
        let totalPages = [[${contractDtos.totalPages}]]
        activePage(currentPage, totalPages);
        let message = [[${message}]]
        showToast(message != null, message);
        search("contract");
    })
</script>
</body>
</html>